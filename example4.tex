\begin{figure}[t]%[htbp]
	\centering
	\lstset{
		numbers=left,
		numberstyle= \tiny,
		keywordstyle= \color{blue!70},
		commentstyle= \color{red!50!green!50!blue!50},
		frame=shadowbox,
		rulesepcolor= \color{red!20!green!20!blue!20} ,
		xleftmargin=1.5em,xrightmargin=0em, aboveskip=1em,
		framexleftmargin=1.5em,
                numbersep= 5pt,
		language=C,
    basicstyle=\scriptsize\ttfamily,
    numberstyle=\scriptsize\ttfamily,
    emphstyle=\bfseries,
                moredelim=**[is][\color{red}]{@}{@},
		escapeinside= {(*@}{@*)}
	}
\begin{lstlisting}[]
Charset charset = Charset.forName("US-ASCII");
(*@{\color{orange}{try}@*) {
    BufferedReader reader = Files.(*@{\color{orange}{newBufferedReader}@*)(file, charset);
    String line = null;
    while ((line = reader.(*@{\color{orange}{readLine}@*)()) != null) {
        System.out.println(line);
    }
} (*@{\color{orange}{catch (IOException x)}@*) {
    System.err.format("IOException: %s%n", x);
}
\end{lstlisting}
        \vspace{-16pt}
        \caption{Using \code{newBufferedReader} to read from a file}
        \label{fig:example4}
\end{figure}
